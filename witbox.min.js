var __extends=this.__extends||function(e,t){function r(){this.constructor=e}for(var n in t)if(t.hasOwnProperty(n))e[n]=t[n];r.prototype=t.prototype;e.prototype=new r};var WitBox={KeyValuePair:function(){function e(e,t){this.name=e;this.value=t}return e}(),Callback:function(){function e(e,t){var n=this;this.fnc=e;this.params=t;this.call=function(e){e.stopPropagation();e.preventDefault();n.fnc(e,n)}}return e}(),Modal:function(){function e(e){this.root=e;this.parameters={};this.callbacks={};this.templateObj=null}e.prototype.setParameter=function(e,t){if(typeof e!="string")throw new Error;this.parameters[e]=t};e.prototype.setCallback=function(e,t,n){if(typeof e!="string")throw new Error;if(typeof t!="string")throw new Error;if(typeof this.callbacks[e]=="undefined")throw new Error;this.callbacks[e][t]=n};e.prototype.initTemplate=function(){$(this.root).html(this.templateObj(this.parameters))};e.prototype.initCallbacks=function(){for(var e in this.callbacks){if(typeof this.callbacks[e]=="undefined")continue;for(var t in this.callbacks[e]){if(typeof this.callbacks[e][t]=="undefined")continue;$(this.root).find("."+e).on(t,this.callbacks[e][t].call)}}};e.prototype.init=function(){this.initTemplate();this.initCallbacks()};return e}(),Viewport:function(){function e(e,t,n,r,i,s,o){var u=this;this.centered=s;this.overlayed=i;this.contentClass=r;this.frame=$("<div>");this.frame.attr("id",e);if(i){this.overlay=$("<div>");this.overlay.addClass("witbox-overlay");this.overlay.appendTo($(document.body));if(o){this.overlay.click(function(e){u.hide()})}}this.frame.addClass((s?"witbox-centered ":"")+"witbox-"+n);this.frame.html(t);this.content=this.frame.find("."+r);this.frame.appendTo($(document.body));this.root=this.frame;this.closeButton=this.frame.find(".close");this.parameters=[];if(s){var u=this;$(window).resize(function(){u.frame.css({left:window.innerWidth/2-u.frame.width()/2+"px",top:window.innerHeight/2-u.frame.height()/2+"px"})})}}e.prototype.show=function(){if(this.centered)$(window).trigger("resize")};e.prototype.hide=function(){$(window).off("resize");if(this.overlayed)$(".witbox-overlay").remove()};return e}(),Dialog:function(){function t(t,n,r,i,s){this.viewport=new t("modal-"+e++,s);this.events={ready:null,open:null,close:null,closed:null};if(n){this.modal=new n(this.viewport.content);this.viewport.modal=this.modal;if(r)for(var o in this.modal.callbacks){this.modal.callbacks[o]=r[o]?r[o]:[]}if(i)for(var o in this.modal.parameters){this.modal.parameters[o]=i[o]?i[o]:[];delete i[o]}}if(i)this.viewport.parameters=i}var e=0;t.prototype.readyCallback=function(e){this.events.ready=e};t.prototype.openCallback=function(e){this.events.open=e};t.prototype.closeCallback=function(e){this.events.close=e};t.prototype.closedCallback=function(e){this.events.closed=e};t.prototype.show=function(){var e=this;if(e.modal)e.modal.init();e.viewport.frame.find(".close").click(function(){e.hide()});e.viewport.show(function(){if(e.events.ready)e.events.ready.fnc(e.events.ready.params)});return this};t.prototype.hide=function(){var e=this;if(e.events.close)e.events.close.fnc(e.events.close.params);e.viewport.hide(function(){if(e.events.closed)e.events.closed.fnc(e.events.closed.params)});return this};return t}()};var WitBoxFactory=function(){function n(){}var e=null;var t=[];n.mouseOutAfter2SecondsAction=function(t,r){var i=0;var s=function(){i=setTimeout(function(){r.hide();n.isClosed(t);$(t).off("mouseenter",o);$(t).off("mouseleave",s)},2e3)};var o=function(){clearTimeout(i)};e=r;$(r.viewport.root).mouseleave(s);$(r.viewport.root).mouseenter(o);$(t).mouseenter(o);$(t).mouseleave(s)};n.closeButtonAction=function(e,t){t.viewport.closeButton.click(function(){n.isClosed(e)})};n.isOpened=function(e){var n=t.indexOf(e);if(n>-1)return true;t.push(e);return false};n.isClosed=function(e){var n=t.indexOf(e);if(n==-1)return true;delete t[t.indexOf(e)];return false};n.hideAll=function(){if(e){e.hide();e=null}};return n}()